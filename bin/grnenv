#!/usr/bin/env bash
set -e
[ -n "$GRNENV_DEBUG" ] && set -x

if [ "$GRNENV_HOME" = "" ]; then
  echo "grnenv: please set \$GRNENV_HOME"
  echo "  e.g.) export GRNENV_HOME=~/.grnenv"
  exit 1
fi

libexec_dir=$GRNENV_HOME/libexec
export PATH="$libexec_dir:$PATH"

exec_command() {
  local command=$1
  if [ -f $path ]; then
    shift
    exec grnenv-$command $@
  else
    echo "grnenv: command not found: <$1>"
    exit 1
  fi
}

command="$1"
case "$command" in
  ""|-h|--help)
    exec_command help
    ;;
  -v|--version)
    exec_command version
    ;;
  *)
    exec_command $@
    ;;
esac
